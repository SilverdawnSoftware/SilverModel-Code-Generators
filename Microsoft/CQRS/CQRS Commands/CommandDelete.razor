
@:      public async Task<ICQRSBase> @(Model.Classifier.Name)(I@(Model.Classifier.Name) @(Model.Classifier.Name.LowerFirst()))
@:      {
@:          var result=new CQRSBase();
@:			try
@:          {
@:              using (var db=new @(GetDbContext(queryClass,Model.Output))())
@:              {
@:                   if (db.@(queryClass.Name)s.Any(w => @(GetWhereForClassifier(Model.Classifier,queryClass))))
@:                   {
@:                       var @(queryClass.Name.LowerFirst()) = db.@(queryClass.Name)s.First(w => @(GetWhereForClassifier(Model.Classifier,queryClass)));
@:                       db.@(queryClass.Name)s.Remove(@(queryClass.Name.LowerFirst()));

@:                       await db.SaveChangesAsync();
@:		
@:                      result.__CQRSSuccessful=true; 
@:						return result;
@:                   }
@:                   else
@:                   {
@:                    result.__CQRSSuccessful=false;
@:                    result.__CQRSErrorMessage="@(queryClass.Name) was not found";
@:                   }
@:               }
@:           }
@:           catch (Exception e)
@:               {
@:                    LogFactory.GetLogger().Log(LogLevel.Error,e);                 
@:                    return new CQRSBase(){__CQRSSuccessful = false,__CQRSErrorMessage = "Unable to delete @(queryClass.Name)",__CQRSStatusCode = 500};
@:                }  
@:                return result;      
@:           }

