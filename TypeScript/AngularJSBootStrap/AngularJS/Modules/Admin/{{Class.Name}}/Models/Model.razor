@using SilvaDawn.SilvaModel.UML.Extensions;
@using SilvaDawn.SilvaModel.UML.Interfaces.Classes;
@using SilvaDawn.SilvaModel.UML.Classes;
// ALLOWOVERWRITE

@foreach (var att in Model.Classifier.AllProperties())  {
			switch (att.Type.GetUMLType())
				{
				case UmlTypeEnum.Enumeration:		
					<text>import {@(att.Type.Name)} from "../../Enums/@(att.Type.Name)"</text>
					break;
				}
}

    export interface I@(Model.Classifier.Name)View {
      @foreach (var att in Model.Classifier.AllProperties()) 	{
			switch (att.Type.GetUMLType())
				{
				case UmlTypeEnum.Class:		
	    		
					var refclass=(IClass)att.Type;	    		
	    			foreach (var att2 in refclass.AllProperties())
			    	{
			    		if (att2["Entity Framework","Default Descriptor"]=="True")
			    		{
			    			
<text>      @(att.Name.LowerFirst())@(att2.Name): @(att2.Type.TypeName("TypeScript"));		</text>    			
			    		}
			    		if (att2["Entity Framework","EF Primary Key"]=="True")
			    		{
<text>      </text>@(att.Name.LowerFirst())@att2.Name<text>: </text>@att2.Type.TypeName("TypeScript")@:;
			    		  
			    		}
			    	}
			    	break;
	    		 default:	    	
<text>      </text>@(att.Name.LowerFirst())<text>: </text>@att.Type.TypeName("TypeScript")@:;    	
	    	break;
	    	}
	    	   	
    	}  

	@foreach (var association in Model.Classifier.GetTargetAssociation())
    	{ 
    	if (!(association.GetSourceMemberEnd().Multiplicity==Multiplicity.Many && association.GetTargetMemberEnd().Multiplicity==Multiplicity.Many))
    			{
		    	IClass associatedClass=(IClass)association.GetSourceMemberEnd().Type;
		    	foreach (var assocaitedClassAtt in associatedClass.AllProperties())
					    	{
					    		if (assocaitedClassAtt["Entity Framework","Default Descriptor"]=="True")
					    		{
					  <text>  @associatedClass.Name.LowerFirst()@assocaitedClassAtt.Name : string; </text>  
					    		}
					    		if (assocaitedClassAtt["Entity Framework","EF Primary Key"]=="True")
					    		{
					  <text>  @associatedClass.Name.LowerFirst()@assocaitedClassAtt.Name : @assocaitedClassAtt.Type.TypeName("TypeScript"); </text>  
					    		}
					    	}
				}
    	}
    }
    
    export class @(Model.Classifier.Name)View implements I@(Model.Classifier.Name)View {
      @foreach (var att in Model.Classifier.AllProperties())
    	{
			if (att.Type.GetUMLType() == UmlTypeEnum.Class)
			{		
	    		
					var refclass=(IClass)att.Type;	    		
	    			foreach (var att2 in refclass.AllProperties())
			    	{
			    		if (att2["Entity Framework","Default Descriptor"]=="True")
			    		{
			    			
<text>      @(att.Name.LowerFirst())@(att2.Name): @att2.Type.TypeName("TypeScript");		</text>    			
			    		}
			    		if (att2["Entity Framework","EF Primary Key"]=="True")
			    		{
<text>      </text>@(att.Name.LowerFirst())@att2.Name<text>: </text>@att2.Type.TypeName("TypeScript")@:;
			    		  
			    		}
			    	}
	    		
	    	}
	    	else
	    	{
<text>      </text>@att.Name.LowerFirst()<text>: </text>@att.Type.TypeName("TypeScript")@:;    	
	    	}    	
    	}  

	@foreach (var association in Model.Classifier.GetTargetAssociation())
    	{ 
    	if (!(association.GetSourceMemberEnd().Multiplicity==Multiplicity.Many && association.GetTargetMemberEnd().Multiplicity==Multiplicity.Many))
    			{
		    	IClass associatedClass=(IClass)association.GetSourceMemberEnd().Type;
		    	foreach (var assocaitedClassAtt in associatedClass.AllProperties())
					    	{
					    		if (assocaitedClassAtt["Entity Framework","Default Descriptor"]=="True")
					    		{
					  <text>  @associatedClass.Name.LowerFirst()@assocaitedClassAtt.Name : string; </text>  
					    		}
					    		if (assocaitedClassAtt["Entity Framework","EF Primary Key"]=="True")
					    		{
					  <text>  @associatedClass.Name.LowerFirst()@assocaitedClassAtt.Name : @assocaitedClassAtt.Type.TypeName("TypeScript") ; </text>  
					    		}
					    	}
				}
    	}


	  constructor() {
	  }
    }
