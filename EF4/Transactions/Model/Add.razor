@using SilvaDawn.SilvaModel.UML.Extensions;
@using SilvaDawn.SilvaModel.UML.Interfaces.Classes;
@using SilvaDawn.SilvaModel.UML.Classes;
// ALLOWOVERWRITE

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;


namespace @(Model.Model.Name).Transactions.Model
{
    public class @(Model.Classifier.Name)Add
    {
    	@foreach (var att in Model.Classifier.AllProperties())
    	{ 
    	
    	if (!(@att["EF4","EF Primary Key"]=="True"))
    	{
    	if (att.Type.IsPrimitiveType())
			{
    	<text>public @att.Type.AsPrimitiveType()["C#"]</text> @att.Name <text> { get; set; } </text>
    	}
    	    }    	
    	}
    	   	
    	@foreach (var att in Model.Classifier.GetTargetAssociation())
    	{ 
    	<text>public int</text> @GetPrimaryKey((IClassifier)att.GetSourceMemberEnd().Type)<text> { get; set; } </text>
    	}
    }
    	
    	
}



@functions{
 
    public static string GetPrimaryKey(IClassifier umlClass)
    {
    	foreach (var att in umlClass.Properties())
		{
			if (att["EF4","EF Primary Key"]=="True")
			{
				return att.Name;
			}
		}
    	
    	return "";
    }
 
}